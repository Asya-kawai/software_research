# 形式手法をなぜやりたいか

## 形式手法の動機

* テスト
  * これまでのテストは網羅性のチェックでしかなかった

* テストの種類
  * 命令網羅
    * 全ての命令を少なくとも1回は実行するテスト
  * 分岐網羅
    * 判定条件の真偽を少なくとも1回は実行するテスト
  * 条件網羅
    * 判定条件が複数ある場合に、条件判定の真偽を組み合わせて行うテスト

* どれだけ網羅しているか、その割合をカバレッジ（網羅率）という場合がある
  * ステートメントカバレッジ = 命令網羅
  * ブランチカバレッジ = 分岐網羅
  * コンディションカバレッジ = 条件網羅

* 参考
https://gihyo.jp/dev/serial/01/tech_station/0003


まぁつらい。

もっと別の方法ないの？  
ってことで、形式手法という手法があるので、これに着目

## 形式手法

* 形式手法（formal verification / formal methods）とは
  * 数学的に証明すること

* 形式手法は形式検証とと呼ばれることも


形式手法には以下の2通り

### 定理証明
* プログラミングを記号を用いて表現し数学的に証明していく手法
* これを行うためのソフトウェアを定理照明器または証明支援機といったりする
* 具体的には、Coq, Isabell/HOL, PVS といったもの

* 定理証明のメリット
  * 複雑なシステム（つまりパラメータ入力値が無限にあるような？無限？？）でも検証可能

* 定理証明のデメリット
  * 扱える人いるの？問題

### モデル検査
* 検証対象と成るシステムを モデルM（構造M） とおき、検証したい性質を 様相論理式 ρ （ロー）で表す
  * 様相論理とは「〜は必然である」とか「〜は可能である」とかを表現するための手法
    * 参考
      * はい、Wikiです。すみません。すみません。
      *  https://ja.wikipedia.org/wiki/%E6%A7%98%E7%9B%B8%E8%AB%96%E7%90%86 
* モデル検査は モデルM が ρ を満たすかどうかを確認する手法
* モデル検査を行うソフトウェアをモデル検査機という

* モデル検査のメリット
  * モデルMがρを満たさない場合に、なぜ満たさないのかといった軌跡を辿ることができる

* モデル検査のデメリット
  * 無限のモデルMに対して適用できない
  * 複雑なモデルMに対しては、状態爆発を起こす
    * たとえば、巨大な状態空間をもつモデルで状態爆発がおこる


### 実践導入するには

一般的に、

* 定理証明は 導入コストが高く、モデル検査は 導入コストが低い

と言われているので、

* 設計開発の早い段階では、モデル検査を導入するのが良く
* 設計開発が複雑化した段階では、定理証明を用いるのが良い

とされているみたい。

* 参考： http://www.kurims.kyoto-u.ac.jp/~cs/lecture2009/lecture09ModelChecking.pdf


# 次回取り組みたいこと

## 命題論理

* 参考： http://www2.yukawa.kyoto-u.ac.jp/~kanehisa.takasaki/edu/logic/logic1.html

## 様相論理К（カー）

* 参考： 
  * http://www2.kobe-u.ac.jp/~mkikuchi/ss2015sano1.pdf
  * http://www2.kobe-u.ac.jp/~mkikuchi/ss2015sano2.pdf
  * http://www2.kobe-u.ac.jp/~mkikuchi/ss2015sano3.pdf
  * http://www.st.nanzan-u.ac.jp/info/gr-thesis/ms/2011/08mi031.pdf
